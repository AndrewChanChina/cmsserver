<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title></title>
<link href="./css/admin.css" rel="stylesheet" type="text/css"/>
<link href="./css/theme.css" rel="stylesheet" type="text/css"/>
<link href="./css/jquery.validate.css" rel="stylesheet" type="text/css"/>
<link href="./css/jquery.treeview.css" rel="stylesheet" type="text/css"/>
<link href="./css/jquery.ui.css" rel="stylesheet" type="text/css"/>

<script src="./js/fckeditor.js" type="text/javascript"></script>
<script src="./js/WdatePicker.js" type="text/javascript"></script>
<script src="./js/jquery.js" type="text/javascript"></script>
<script src="./js/jquery.ext.js" type="text/javascript"></script>
<script src="./js/pony.js" type="text/javascript"></script>
<script src="./js/admin.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
	$("#jvForm").validate();
	//栏目权限对话框
	$("#channelDialog0").dialog({
		autoOpen: false,
		modal: true,
		width: 280,
		height: 420,
		position: ["center",20],
		buttons: {
			"OK": function() {
				$(this).dialog("close");
			}
		},
		close: function(event, ui) {
			//将列表框中已选中的项复制到隐藏表单中
			var s="";
			$("#channels0").children().each(function(){
				if($(this).attr("selected")) {
					s += "<input type='hidden' name='channelIds' value='" +$(this).val()+ "'/>";
				}
			});
			$("#channelIdsContainer0").empty().append(s);
		}
	});
	var channels_opened_0 = false;
	$('#channel0').click(function(){
		//第一次打开，需要获取数据。	
		if(!channels_opened_0) {
			//获取数据
			$.get("v_channels_add.do",{"siteId":1},function(s) {
				$(s).appendTo("#channels0");
			});
			channels_opened_0 = true;
		}
		$('#channelDialog0').dialog('open');
		return false;
	});	
});
function disSite(chk,i) {
	if(chk) {
		$("#step"+i).removeAttr("disabled");
		$("#channel"+i).removeAttr("disabled");
		$("#allChannel"+i).removeAttr("disabled");
		$("#channelIdsContainer"+i).children().each(function(){$(this).removeAttr("disabled");});
	} else {
		$("#step"+i).attr("disabled","disabled");
		$("#channel"+i).attr("disabled","disabled");
		$("#allChannel"+i).attr("disabled","disabled");		
		$("#channelIdsContainer"+i).children().each(function(){$(this).attr("disabled","disabled");});
	}
}
function disChannels(chk,i) {
	$("#allChannel"+i).val(chk);
	if(chk) {
		$("#channels"+i).addClass("disabled").attr("disabled","disabled").children().each(function(){$(this).removeAttr("selected")});
		$("#channelIdsContainer"+i).empty();
	} else {
		$("#channels"+i).removeAttr("disabled").removeClass("disabled");
	}
}
</script>
</head>
<body>
<div class="body-box">
<div class="rhead">
	<div class="rpos">当前位置: 管理员(全站) - 添加</div>
	<form class="ropt">
		<input type="submit" value="返回列表" onclick="this.form.action='v_list.do';"/>
	</form>
	<div class="clear"></div>
</div>
<form method="post" action="o_save.do" id="jvForm">
<table width="100%" class="pn-ftable" cellpadding="2" cellspacing="1" border="0">
<tr>
<td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>用户名:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="100" name="username" vld="{required:true,username:true,remote:'v_check_username.do',messages:{remote:'用户名已被使用'}}" maxlength="100"/></td><td width="12%" class="pn-flabel pn-flabel-h">电子邮箱:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="100" name="email" class="email" size="30" maxlength="100"/></td></tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>密码:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="password" autocomplete="off" id="password" maxlength="100" name="password" class="required" maxlength="100"/>
</td><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>确认密码:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="password" autocomplete="off" equalTo="#password"/>
</td></tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>会员组:</td><td colspan="1" width="38%" class="pn-fcontent"><select name="groupId"><option value="1">普通会员</option><option value="2">高级组</option></select>
</td><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>等级:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="5" max="9" value="8" name="rank" class="required digits" style="width:70px" maxlength="5"/> <span class="pn-fhelp">越大等级越高</span></td></tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h">真实姓名:</td><td colspan="1" width="38%" class="pn-fcontent"><input type="text" maxlength="100" name="realname" maxlength="100"/></td><td width="12%" class="pn-flabel pn-flabel-h">性别:</td><td colspan="1" width="38%" class="pn-fcontent"><label><input type="radio" value="true" name="gender"/>男</label> <label><input type="radio" value="false" name="gender"/>女</label> <label><input type="radio" value="" checked="checked" name="gender"/>保密</label></td>
</tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>受限管理员:</td><td colspan="1" width="38%" class="pn-fcontent"><label><input type="radio" value="true" name="selfAdmin"/>是</label> <label><input type="radio" value="false" checked="checked" name="selfAdmin"/>否</label> <span class="pn-fhelp">只能管理自己的数据</span></td>
<td width="12%" class="pn-flabel pn-flabel-h"><span class="pn-frequired">*</span>只读管理员:</td><td colspan="1" width="38%" class="pn-fcontent"><label><input type="radio" value="true" name="viewonlyAdmin"/>是</label> <label><input type="radio" value="false" checked="checked" name="viewonlyAdmin"/>否</label> <span class="pn-fhelp">用于后台演示</span></td>
</tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h">角色:</td><td colspan="3" width="88%" class="pn-fcontent"><label><input type="checkbox" value="1" name="roleIds"/>管理员</label></td></tr>
<tr><td width="12%" class="pn-flabel pn-flabel-h">站点:</td><td colspan="3" width="88%" class="pn-fcontent">
<div style="float:left;padding-right:3px">
	<label><input type="checkbox" name="siteIds" value="1" checked="checked" onclick="disSite(this.checked,0)"/>JEECMS开发站</label>
	<input id="step0" type="text" name="steps" value="1" min="1" max="127" class="required digits" style="width:40px"/>
	<input id="channel0" type="button" value="栏目权限"/>	
	<input type="hidden" id="allChannel0" name="allChannels" value="true"/>
	<span id="channelIdsContainer0"></span>
	<div id="channelDialog0" title="栏目权限(JEECMS开发站)" style="display:none;">
		<label><input type="checkbox" onclick="disChannels(this.checked,0)" checked="checked"/>所有栏目</label>
		<select id="channels0" disabled="disabled" class="disabled" multiple="multiple" size="15" style="width:100%;"></select>
	</div>
</div>
<div style="clear:both"></div>
</td></tr>
<tr><td colspan="4" class="pn-fbutton">
<input type="submit" value="提交"/> &nbsp; <input type="reset" value="重置"/></td>
</tr></table>
</form>
</div>
</body>
</html>